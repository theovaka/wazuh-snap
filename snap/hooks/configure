#!/bin/sh

# FIND=$(echo *)

# echo "The contents of . are: $FIND"

# FIND=$(cd $SNAP; echo *)
# echo "The contents of SNAP are: $FIND"

. "$SNAP/management-script"

handle_manager_config()
{
        echo "Inside handle_manager_config"
        manager="$(get_wazuh_manager)"

        echo "Setting wazuh_manager..."
       # run function from management script
        set_wazuh_manager "$manager"

        echo "Restarting wazuh-agent..."
        # Restart example-server to apply new config
        snapctl restart wazuh-agent
}

handle_password_config()
{
        password="$(get_wazuh_registration_password)"

       # run function from management script
        set_wazuh_registration_password "$password"

        # Restart example-server to apply new config
        snapctl restart wazuh-agent
}

handle_manager_config
handle_password_config